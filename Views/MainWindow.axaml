<!-- Views/MainWindow.axaml -->
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:PixelWallE.ViewModels"  
        xmlns:ctrl="using:PixelWallE.Controls"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
        x:Class="PixelWallE.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="Pixel Wall-E">

    <Design.DataContext>
        <!-- This only sets the DataContext for the previewer in an IDE,
             to set the actual DataContext please modify the App.axaml.cs file. -->
        <vm:MainWindowViewModel />
    </Design.DataContext>

    <Grid ColumnDefinitions="Auto,*,Auto" Background="#141720" RowDefinitions="Auto,*,Auto" Margin="10">

        <!-- Top Panel: Controls -->
        <StackPanel Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="3" Orientation="Horizontal" Spacing="10" Margin="0,0,0,10">
            <Button Content="Execute Code" Background="#596589" Command="{Binding ExecuteCodeCommand}"/>
             <!-- Add Load/Save later -->
            <TextBlock Text="Canvas Size:" VerticalAlignment="Center"/>
            <NumericUpDown Value="{Binding CanvasSize}" Minimum="8" Maximum="512" Increment="1" Width="120"/>
            <Button Content="Resize Canvas" Background="#596589" Command="{Binding ApplyResizeCommand}"/>
            <!-- Temporary Test Button -->
            <Button  Content="Run Test Sequence" Command="{Binding RunTestSequenceCommand}" IsVisible="False"/> <!-- Hide test btn later -->
        </StackPanel>


        <!-- Left Panel: Text Editor (Basic for now) -->
        <TextBox Grid.Row="1" Grid.Column="0"
                 Text="{Binding CodeText}"
                 AcceptsReturn="True"
                 AcceptsTab="True" 
                 FontFamily="Consolas,Monospace"
                 Watermark="Enter Wall-E Code Here..."
                 MinWidth="250"
                 Margin="0,0,10,0"/>

        <!-- Center Panel: Canvas -->
        <Border Grid.Row="1" Grid.Column="1"
                BorderBrush="Gray" BorderThickness="1"
                HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                Background="White"> <!-- Add this background -->
            <!-- Bind the custom control's CanvasData to the ViewModel's property -->
            <ctrl:PixelCanvasControl CanvasData="{Binding PixelCanvas}" />
        </Border>

        <!-- Right Panel: Maybe Info/Output later -->
         <TextBlock Grid.Row="1" Grid.Column="2" Text="Output/Info" Foreground="Gray" IsVisible="False"/>

        <!-- Bottom Status Bar (using Border and TextBlock) -->
        <Border Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="3"
                BorderBrush="LightGray" BorderThickness="0,1,0,0" 
                Padding="5,3" Margin="0,10,0,0" Background="#271c3e"> <!-- Basic styling -->
            <TextBlock Text="Ready" VerticalAlignment="Center"/>
             <!-- You can add more TextBlocks or other controls here later, maybe in a StackPanel -->
        </Border>

    </Grid>
</Window>